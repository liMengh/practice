<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>Bootstrap 文件上传按钮示例</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.4/css/fileinput.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.4/themes/fas/theme.min.css" rel="stylesheet" />
    <style>
        body { padding: 20px; }
        #uploadBtn {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<!-- 隐藏的文件选择 input -->
<input id="fileInput" name="files[]" type="file" multiple style="display:none;" />

<!-- 按钮触发 -->
<button id="uploadBtn" class="btn btn-primary">选择文件上传</button>

<!-- 预览已选文件名 -->
<div id="fileList" class="mt-3"></div>

<!-- bootstrap-fileinput 上传插件容器 -->
<input id="fileinputPlugin" name="files[]" type="file" multiple />

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.4/js/fileinput.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.4/themes/fas/theme.min.js"></script>

<script>
    // 隐藏input + 按钮触发版
    const fileInput = document.getElementById('fileInput');
    const uploadBtn = document.getElementById('uploadBtn');
    const fileList = document.getElementById('fileList');

    uploadBtn.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', () => {
        const files = Array.from(fileInput.files);
        if (files.length === 0) {
            fileList.textContent = '未选择文件';
            return;
        }
        fileList.innerHTML = '<strong>已选文件：</strong>' + files.map(f => f.name).join(', ');
    });

    // bootstrap-fileinput 插件示例（带上传按钮和拖拽）
    $("#fileinputPlugin").fileinput({
        theme: 'fas',
        showUpload: true,
        showRemove: true,
        browseOnZoneClick: true,
        dropZoneEnabled: true,
        uploadUrl: '/upload', // 替换成你的后端上传地址
        allowedFileExtensions: ['jpg', 'png', 'gif', 'pdf', 'docx'],
        maxFileSize: 5000,
        maxFilesNum: 10,
        uploadAsync: false,
        overwriteInitial: false,
        elErrorContainer: '#errorBlock',
        msgPlaceholder: '拖拽或点击选择文件',
    }).on('filebatchuploadsuccess', function(event, data) {
        alert('批量上传成功！');
    }).on('filebatchuploaderror', function(event, data) {
        alert('上传出错！');
    });
</script>

</body>
</html>
